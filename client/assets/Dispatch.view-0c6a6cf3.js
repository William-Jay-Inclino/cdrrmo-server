import{d as x,j as A,c as l,a as t,n as $,u as _,t as e,H as b,B as p,I as L,J as E,o,K as i,L as P,_ as V,b as D,E as z,i as m,r as F,w as q,F as J,e as K,m as Q,q as R,M as T}from"./index-6bbaaed9.js";import{d as G}from"./dispatch.store-6e023fd8.js";import{_ as W,a as X}from"./TeamMembers.vue_vue_type_script_setup_true_lang-ee2a59eb.js";import"./emergency.store-98a086ee.js";import"./team.store-9700f9bd.js";import"./user.store-b2a1a52e.js";import"./na.store-4a612637.js";import"./bart.service-94933cd4.js";import"./cso.store-fb12af7b.js";import"./po.store-ced8ebcb.js";import"./training_skill.store-713a7512.js";const M=u=>(L("data-v-fd505856"),u=u(),E(),u),Y=["id","aria-labelledby"],Z={class:"modal-dialog is-wider",role:"document"},tt={class:"modal-content"},st={key:0,class:"modal-title"},et={key:1,class:"modal-title"},at=M(()=>t("button",{class:"close",type:"button","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"Ã—")],-1)),ot={class:"modal-body"},lt={key:0},nt={key:1},it={key:0,class:"modal-footer justify-content-between"},dt=M(()=>t("button",{class:"btn btn-dark",type:"button","data-dismiss":"modal"},"Cancel",-1)),ct={key:1,class:"modal-footer"},rt=M(()=>t("button",{class:"btn btn-dark float-end",type:"button","data-dismiss":"modal"},"Close",-1)),ut=[rt],_t=x({__name:"DispatchStatusModal",props:{id:{},dispatchedTeam:{}},emits:["update-status"],setup(u,{emit:c}){const r=u,v=c,h=A(()=>{var a,d;return((a=r.dispatchedTeam)==null?void 0:a.status)===i.Queue?{status:i.Dispatched,statusObj:P[i.Dispatched]}:((d=r.dispatchedTeam)==null?void 0:d.status)===i.Dispatched?{status:i.Deck,statusObj:P[i.Deck]}:null}),S=()=>{var a;console.log("onUpdate()"),v("update-status",{status:(a=h.value)==null?void 0:a.status})};return(a,d)=>{var f,w,y,g,k;return a.dispatchedTeam?(o(),l("div",{key:0,class:"modal fade",id:a.id,tabindex:"-1",role:"dialog","aria-labelledby":a.id,"aria-hidden":"true"},[t("div",Z,[t("div",tt,[t("div",{class:$(["modal-header",{"text-bg-success":a.dispatchedTeam.status===_(i).Deck}])},[a.dispatchedTeam.status!==_(i).Deck?(o(),l("h5",st,"Please Confirm")):(o(),l("h5",et,"Status: "+e((f=a.dispatchedTeam.statusObj)==null?void 0:f.text),1)),at],2),t("div",ot,[a.dispatchedTeam.status!==_(i).Deck?(o(),l("div",lt,[b(" Update status "),t("span",{class:$([{[`text-bg-${(w=a.dispatchedTeam.statusObj)==null?void 0:w.color}`]:!0},"badge rounded-pill text-white"])},e((y=a.dispatchedTeam.statusObj)==null?void 0:y.text),3),b(" to "),t("span",{class:$([{[`text-bg-${(g=h.value)==null?void 0:g.statusObj.color}`]:!0},"badge rounded-pill text-white"])},e((k=h.value)==null?void 0:k.statusObj.text),3),b("? ")])):(o(),l("div",nt," Team arrived in the location! "))]),a.dispatchedTeam.status!==_(i).Deck?(o(),l("div",it,[dt,t("button",{onClick:S,class:"btn btn-primary",type:"button","data-dismiss":"modal"},"Update")])):(o(),l("div",ct,ut))])])],8,Y)):p("",!0)}}});const ht=V(_t,[["__scopeId","data-v-fd505856"]]),pt=["id","aria-labelledby"],mt={class:"modal-dialog modal-xl",role:"document"},bt={class:"modal-content"},vt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Team Details")],-1),ft={class:"modal-body"},wt={class:"row"},yt={class:"col"},gt={class:"col"},kt=t("div",{class:"modal-footer"},[t("button",{class:"btn btn-dark float-end",type:"button","data-dismiss":"modal"},"Close")],-1),$t=x({__name:"TeamInfoModal",props:{id:{},teamId:{}},setup(u){return(c,r)=>(o(),l("div",{class:"modal fade",id:c.id,tabindex:"-1",role:"dialog","aria-labelledby":c.id,"aria-hidden":"true"},[t("div",mt,[t("div",bt,[vt,t("div",ft,[t("div",wt,[t("div",yt,[D(W,{"team-id":c.teamId},null,8,["team-id"])]),t("div",gt,[D(X,{"team-id":c.teamId},null,8,["team-id"])])])]),kt])])],8,pt))}}),Dt={class:"container-fluid"},St={class:"d-sm-flex align-items-center justify-content-between mb-4"},Ct=t("h1",{class:"h3 mb-0 text-gray-800"},"Dispatch Module",-1),xt=t("button",{class:"btn btn-primary",type:"submit"},"Dispatch a Team",-1),Mt={class:"row justify-content-center"},It={class:"col-10"},jt={class:"card shadow mb-4"},Ht={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between text-bg-secondary"},Nt={class:"m-0 font-weight-bold"},Ot=t("span",null,"Status: ",-1),Bt=t("span",{class:"text-white mr-2 ml-3",style:{display:"inline-block",transform:"scale(1, 2)"}}," | ",-1),Pt=t("span",null," Created on: ",-1),Ut={class:"dropdown"},At=t("button",{class:"btn btn-light dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Actions ",-1),Lt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},Et=t("a",{class:"dropdown-item",href:"#"},[t("i",{class:"fas fa-fw fa-sync-alt text-primary"}),t("span",{class:"ml-2"},"Update Details")],-1),Vt={key:0,class:"dropdown-divider"},zt=["onClick","data-target"],Ft=t("i",{class:"fas fa-fw fa-check text-primary"},null,-1),qt=t("span",{class:"ml-2"},"Update Status",-1),Jt=[Ft,qt],Kt=["onClick"],Qt=t("i",{class:"fas fa-fw fa-ambulance text-primary"},null,-1),Rt=t("span",{class:"ml-2"},"Proceeding to Hospital",-1),Tt=[Qt,Rt],Gt=["onClick"],Wt=t("i",{class:"fas fa-fw fa-hospital text-primary"},null,-1),Xt=t("span",{class:"ml-2"},"Arrived in Hospital",-1),Yt=[Wt,Xt],Zt={class:"card-body"},ts={class:"table-responsive"},ss={class:"table table-hover table-bordered"},es={width:"25%",colspan:"2",style:{"text-align":"center"}},as=["onClick","data-target"],os=t("i",{class:"fas fa-fw fa-info-circle text-info"},null,-1),ls=[os],ns=t("th",{width:"18.75%"},"Nature of Emergency",-1),is=t("th",{width:"18.75%"},"Dispatcher",-1),ds=t("th",{width:"18.75%"},"Location",-1),cs=t("th",{width:"18.75%"},"Number of People Involved",-1),rs=t("tr",null,[t("th",null,"Team Leader"),t("th",null,"Team Name"),t("th"),t("th"),t("th"),t("th")],-1),us={class:"table table-hover table-bordered"},_s=t("thead",null,[t("tr",null,[t("th",null,"Caller Name"),t("th",null,"Caller Number"),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Proceeding")]),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Arrival")]),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Proceeding Hospital")]),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Arrival Hospital")])])],-1),hs={class:"table table-hover table-bordered"},ps=t("thead",null,[t("tr",null,[t("th",{width:"25%"},"Description"),t("th",{width:"25%"},"Medical Description"),t("th",{width:"25%"},"Hazard"),t("th",{width:"25%"},"Remarks")])],-1),xs=x({__name:"Dispatch.view",setup(u){const c=z(),r=G(),v=m(!1),h=m("dispatchStatusModal"),S=m(!1),a=m("teamInfoModalId"),d=m(),f=n=>{console.log("onShowDispatchStatusModal()",n),v.value=!0,d.value=n},w=n=>{console.log("onShowDispatchStatusModal()",n),S.value=!0,d.value=n},y=n=>{!n.status||!d.value||(r.updateDispatchStatus({id:d.value.dispatch_id,status:n.status}),c.success("Status successfully updated!"))},g=n=>{r.onProceedingHospital(n),c.success("Time proceeding to hospital recorded!")},k=n=>{r.onArrivedHospital(n),c.success("Time arrived in hospital recorded!")};return(n,ms)=>{const U=F("router-link");return o(),l("div",Dt,[t("div",St,[Ct,D(U,{to:{name:"dispatchForm.route"}},{default:q(()=>[xt]),_:1},8,["to"])]),(o(!0),l(J,null,K(_(r).dispatchedTeams,s=>{var I,j,H,N,O,B;return o(),l("div",Mt,[t("div",It,[t("div",jt,[t("div",Ht,[t("h6",Nt,[Ot,t("span",{class:$([{[`text-bg-${(I=s.statusObj)==null?void 0:I.color}`]:!0},"badge rounded-pill text-white"])},e((j=s.statusObj)==null?void 0:j.text),3),Bt,Pt,b(" "+e(s.time_dispatch),1)]),t("div",Ut,[At,t("div",Lt,[Et,s.time_arrival_hospital?p("",!0):(o(),l("div",Vt)),s.status!==_(i).Deck?(o(),l("a",{key:1,class:"dropdown-item",href:"javascript:void(0)",onClick:C=>f(s),"data-toggle":"modal","data-target":`#${h.value}`},Jt,8,zt)):p("",!0),s.status===_(i).Deck&&!s.time_proceeding_hospital?(o(),l("a",{key:2,onClick:C=>g(s),class:"dropdown-item",href:"#"},Tt,8,Kt)):p("",!0),s.time_proceeding_hospital&&!s.time_arrival_hospital?(o(),l("a",{key:3,onClick:C=>k(s),class:"dropdown-item",href:"#"},Yt,8,Gt)):p("",!0)])])]),t("div",Zt,[t("div",ts,[t("table",ss,[t("thead",null,[t("tr",null,[t("th",es,[b(" Team Dispatched "),t("button",{onClick:C=>w(s),"data-toggle":"modal","data-target":`#${a.value}`,class:"btn btn-light btn-sm"},ls,8,as)]),ns,is,ds,cs]),rs]),t("tbody",null,[t("tr",null,[t("td",null,e((H=s.teamLeader)==null?void 0:H.first_name),1),t("td",null,e((N=s.team)==null?void 0:N.team_name),1),t("td",null,e((O=s.emergency)==null?void 0:O.nature),1),t("td",null,e((B=s.dispatcher)==null?void 0:B.first_name),1),t("td",null,e(s.location),1),t("td",null,e(s.num_people_involved),1)])])]),t("table",us,[_s,t("tbody",null,[t("tr",null,[t("td",null,e(s.caller_name),1),t("td",null,e(s.caller_number),1),t("td",null,e(s.time_proceeding),1),t("td",null,e(s.time_arrival),1),t("td",null,e(s.time_proceeding_hospital),1),t("td",null,e(s.time_arrival_hospital),1)])])]),t("table",hs,[ps,t("tbody",null,[t("tr",null,[t("td",null,e(s.description),1),t("td",null,e(s.medical_description),1),t("td",null,e(s.hazard),1),t("td",null,e(s.remarks),1)])])])])])])])])}),256)),Q(D(ht,{id:h.value,"dispatched-team":d.value,onUpdateStatus:y},null,8,["id","dispatched-team"]),[[R,v.value]]),d.value?(o(),T($t,{key:0,id:a.value,"team-id":d.value.team_id},null,8,["id","team-id"])):p("",!0)])}}});export{xs as default};
