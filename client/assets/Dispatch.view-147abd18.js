import{d as U,h as B,c as l,a as t,n as D,e as r,t as e,i as b,j as h,o,D as i,p as L,k as V,C as H,_ as z,l as E,m as F,q as m,r as q,b as P,w as Q,F as R,s as G,v as J,x as K,y as W}from"./index-8288363f.js";import{_ as X}from"./TeamInfo.vue_vue_type_script_setup_true_lang-c24668c5.js";const C=u=>(L("data-v-34d3e22d"),u=u(),V(),u),Y=["id","aria-labelledby"],Z={class:"modal-dialog is-wider",role:"document"},T={class:"modal-content"},tt={key:0,class:"modal-title"},st={key:1,class:"modal-title"},et=C(()=>t("button",{class:"close",type:"button","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"Ã—")],-1)),at={class:"modal-body"},ot={key:0},lt={key:1},nt={key:0,class:"modal-footer justify-content-between"},it=C(()=>t("button",{class:"btn btn-dark",type:"button","data-dismiss":"modal"},"Cancel",-1)),dt={key:1,class:"modal-footer"},ct=C(()=>t("button",{class:"btn btn-dark float-end",type:"button","data-dismiss":"modal"},"Close",-1)),rt=[ct],ut=U({__name:"DispatchStatusModal",props:{id:{},dispatchedTeam:{}},emits:["update-status"],setup(u,{emit:p}){const c=u,v=p,_=B(()=>{var a,d;return((a=c.dispatchedTeam)==null?void 0:a.status)===i.Queue?{status:i.Dispatched,statusObj:H[i.Dispatched]}:((d=c.dispatchedTeam)==null?void 0:d.status)===i.Dispatched?{status:i.Deck,statusObj:H[i.Deck]}:null}),S=()=>{var a;console.log("onUpdate()"),v("update-status",{status:(a=_.value)==null?void 0:a.status})};return(a,d)=>{var f,w,y,g,k;return a.dispatchedTeam?(o(),l("div",{key:0,class:"modal fade",id:a.id,tabindex:"-1",role:"dialog","aria-labelledby":a.id,"aria-hidden":"true"},[t("div",Z,[t("div",T,[t("div",{class:D(["modal-header",{"text-bg-success":a.dispatchedTeam.status===r(i).Deck}])},[a.dispatchedTeam.status!==r(i).Deck?(o(),l("h5",tt,"Please Confirm")):(o(),l("h5",st,"Status: "+e((f=a.dispatchedTeam.statusObj)==null?void 0:f.text),1)),et],2),t("div",at,[a.dispatchedTeam.status!==r(i).Deck?(o(),l("div",ot,[b(" Update status "),t("span",{class:D([{[`text-bg-${(w=a.dispatchedTeam.statusObj)==null?void 0:w.color}`]:!0},"badge rounded-pill text-white"])},e((y=a.dispatchedTeam.statusObj)==null?void 0:y.text),3),b(" to "),t("span",{class:D([{[`text-bg-${(g=_.value)==null?void 0:g.statusObj.color}`]:!0},"badge rounded-pill text-white"])},e((k=_.value)==null?void 0:k.statusObj.text),3),b("? ")])):(o(),l("div",lt," Team arrived in the location! "))]),a.dispatchedTeam.status!==r(i).Deck?(o(),l("div",nt,[it,t("button",{onClick:S,class:"btn btn-primary",type:"button","data-dismiss":"modal"},"Update")])):(o(),l("div",dt,rt))])])],8,Y)):h("",!0)}}}),_t=z(ut,[["__scopeId","data-v-34d3e22d"]]),ht={class:"container-fluid"},pt={class:"d-sm-flex align-items-center justify-content-between mb-4"},mt=t("h1",{class:"h3 mb-0 text-gray-800"},"Dispatch Module",-1),bt=t("button",{class:"btn btn-primary",type:"submit"},"Dispatch a Team",-1),vt={class:"row justify-content-center"},ft={class:"col-10"},wt={class:"card shadow mb-4"},yt={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between text-bg-secondary"},gt={class:"m-0 font-weight-bold"},kt=t("span",null,"Status: ",-1),Dt=t("span",{class:"text-white mr-2 ml-3",style:{display:"inline-block",transform:"scale(1, 2)"}}," | ",-1),St=t("span",null," Created on: ",-1),$t={class:"dropdown"},Ct=t("button",{class:"btn btn-light dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Actions ",-1),xt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},Mt=t("a",{class:"dropdown-item",href:"#"},[t("i",{class:"fas fa-fw fa-sync-alt text-primary"}),t("span",{class:"ml-2"},"Update Details")],-1),jt={key:0,class:"dropdown-divider"},It=["onClick","data-target"],Nt=t("i",{class:"fas fa-fw fa-check text-primary"},null,-1),Ot=t("span",{class:"ml-2"},"Update Status",-1),Ht=[Nt,Ot],Pt=["onClick"],Ut=t("i",{class:"fas fa-fw fa-ambulance text-primary"},null,-1),At=t("span",{class:"ml-2"},"Proceeding to Hospital",-1),Bt=[Ut,At],Lt=["onClick"],Vt=t("i",{class:"fas fa-fw fa-hospital text-primary"},null,-1),zt=t("span",{class:"ml-2"},"Arrived in Hospital",-1),Et=[Vt,zt],Ft={class:"card-body"},qt={class:"table-responsive"},Qt={class:"table table-hover table-bordered"},Rt={width:"25%",colspan:"2",style:{"text-align":"center"}},Gt=["onClick","data-target"],Jt=t("i",{class:"fas fa-fw fa-info-circle text-info"},null,-1),Kt=[Jt],Wt=t("th",{width:"18.75%"},"Nature of Emergency",-1),Xt=t("th",{width:"18.75%"},"Dispatcher",-1),Yt=t("th",{width:"18.75%"},"Location",-1),Zt=t("th",{width:"18.75%"},"Number of People Involved",-1),Tt=t("tr",null,[t("th",null,"Team Leader"),t("th",null,"Team Name"),t("th"),t("th"),t("th"),t("th")],-1),ts={class:"table table-hover table-bordered"},ss=t("thead",null,[t("tr",null,[t("th",null,"Caller Name"),t("th",null,"Caller Number"),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Proceeding")]),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Arrival")]),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Proceeding Hospital")]),t("th",{width:"18.75%"},[t("span",{class:"ml-2"},"Time Arrival Hospital")])])],-1),es={class:"table table-hover table-bordered"},as=t("thead",null,[t("tr",null,[t("th",{width:"25%"},"Description"),t("th",{width:"25%"},"Medical Description"),t("th",{width:"25%"},"Hazard"),t("th",{width:"25%"},"Remarks")])],-1),is=U({__name:"Dispatch.view",setup(u){const p=E(),c=F(),v=m(!1),_=m("dispatchStatusModal"),S=m(!1),a=m("teamInfoModalId"),d=m(),f=n=>{console.log("onShowDispatchStatusModal()",n),v.value=!0,d.value=n},w=n=>{console.log("onShowDispatchStatusModal()",n),S.value=!0,d.value=n},y=n=>{!n.status||!d.value||(c.updateDispatchStatus({id:d.value.dispatch_id,status:n.status}),p.success("Status successfully updated!"))},g=n=>{c.onProceedingHospital(n),p.success("Time proceeding to hospital recorded!")},k=n=>{c.onArrivedHospital(n),p.success("Time arrived in hospital recorded!")};return(n,os)=>{const A=q("router-link");return o(),l("div",ht,[t("div",pt,[mt,P(A,{to:{name:"dispatchForm.route"}},{default:Q(()=>[bt]),_:1},8,["to"])]),(o(!0),l(R,null,G(r(c).dispatchedTeams,s=>{var x,M,j,I,N,O;return o(),l("div",vt,[t("div",ft,[t("div",wt,[t("div",yt,[t("h6",gt,[kt,t("span",{class:D([{[`text-bg-${(x=s.statusObj)==null?void 0:x.color}`]:!0},"badge rounded-pill text-white"])},e((M=s.statusObj)==null?void 0:M.text),3),Dt,St,b(" "+e(s.time_dispatch),1)]),t("div",$t,[Ct,t("div",xt,[Mt,s.time_arrival_hospital?h("",!0):(o(),l("div",jt)),s.status!==r(i).Deck?(o(),l("a",{key:1,class:"dropdown-item",href:"javascript:void(0)",onClick:$=>f(s),"data-toggle":"modal","data-target":`#${_.value}`},Ht,8,It)):h("",!0),s.status===r(i).Deck&&!s.time_proceeding_hospital?(o(),l("a",{key:2,onClick:$=>g(s),class:"dropdown-item",href:"#"},Bt,8,Pt)):h("",!0),s.time_proceeding_hospital&&!s.time_arrival_hospital?(o(),l("a",{key:3,onClick:$=>k(s),class:"dropdown-item",href:"#"},Et,8,Lt)):h("",!0)])])]),t("div",Ft,[t("div",qt,[t("table",Qt,[t("thead",null,[t("tr",null,[t("th",Rt,[b(" Team Dispatched "),t("button",{onClick:$=>w(s),"data-toggle":"modal","data-target":`#${a.value}`,class:"btn btn-light btn-sm"},Kt,8,Gt)]),Wt,Xt,Yt,Zt]),Tt]),t("tbody",null,[t("tr",null,[t("td",null,e((j=s.teamLeader)==null?void 0:j.first_name),1),t("td",null,e((I=s.team)==null?void 0:I.team_name),1),t("td",null,e((N=s.emergency)==null?void 0:N.nature),1),t("td",null,e((O=s.dispatcher)==null?void 0:O.first_name),1),t("td",null,e(s.location),1),t("td",null,e(s.num_people_involved),1)])])]),t("table",ts,[ss,t("tbody",null,[t("tr",null,[t("td",null,e(s.caller_name),1),t("td",null,e(s.caller_number),1),t("td",null,e(s.time_proceeding),1),t("td",null,e(s.time_arrival),1),t("td",null,e(s.time_proceeding_hospital),1),t("td",null,e(s.time_arrival_hospital),1)])])]),t("table",es,[as,t("tbody",null,[t("tr",null,[t("td",null,e(s.description),1),t("td",null,e(s.medical_description),1),t("td",null,e(s.hazard),1),t("td",null,e(s.remarks),1)])])])])])])])])}),256)),J(P(_t,{id:_.value,"dispatched-team":d.value,onUpdateStatus:y},null,8,["id","dispatched-team"]),[[K,v.value]]),d.value?(o(),W(X,{key:0,id:a.value,"team-id":d.value.team_id},null,8,["id","team-id"])):h("",!0)])}}});export{is as default};
